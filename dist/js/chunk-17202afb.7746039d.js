(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17202afb"],{3007:function(t,e,o){"use strict";var i=o("326b");e["a"]={login:function(t){return i["a"].post("/api/login",t)},register:function(t){return i["a"].post("/api/register",t)},userInfo:function(t){return i["a"].post("/api/userInfo",t)},getUse:function(t){return i["a"].get("/api/getUse",{params:t})}}},"4cdd":function(t,e,o){},8823:function(t,e,o){"use strict";var i=o("4cdd"),n=o.n(i);n.a},d0da:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"info"}},[i("el-form",{attrs:{"label-width":"200px","label-position":"left",model:t.form}},[i("el-form-item",{attrs:{label:"昵称"}},[i("span",[t._v(t._s(t.form.username))])]),i("el-form-item",{attrs:{label:"头像"}},[i("div",{staticClass:"avater-box"},[i("img",{staticClass:"avater",attrs:{src:t.form.avater?t.form.avater:o("f0fc")}}),i("div",{staticClass:"update-avater"},[i("input",{ref:"upfile",staticClass:"file-update",attrs:{type:"file",accept:"image/png,image/jpeg,image/jpg"},on:{change:t.upfile}}),i("i",{staticClass:"el-icon-edit"})])])]),i("el-form-item",{attrs:{label:"性别"}},[i("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[i("el-radio",{attrs:{label:0}},[t._v("保密")]),i("el-radio",{attrs:{label:1}},[t._v("男")]),i("el-radio",{attrs:{label:2}},[t._v("女")])],1)],1),i("el-form-item",{attrs:{label:"个人简介"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.form.d,callback:function(e){t.$set(t.form,"d",e)},expression:"form.d"}})],1),i("el-form-item",{attrs:{label:"操作"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1),i("el-dialog",{attrs:{title:"图片剪裁",visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"cropper-content"},[i("div",{staticClass:"cropper",staticStyle:{"text-align":"center"}},[i("vueCropper",{ref:"cropper",attrs:{img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:!0,full:t.option.full,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,centerBox:t.option.centerBox,infoTrue:t.option.infoTrue,fixedBox:t.option.fixedBox},on:{realTime:t.realTime}})],1)]),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.finish}},[t._v("确认")])],1)])],1)},n=[],a=o("cea2"),r=o("2149"),s=o("3007"),l={name:"login",data:function(){return{form:{},qiniuToken:"",dialogVisible:!1,option:{img:"",info:!0,outputSize:.8,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:100,autoCropHeight:100,fixedBox:!0,fixed:!0,fixedNumber:[1,1],full:!0,canMoveBox:!1,original:!1,centerBox:!1,infoTrue:!0},token:localStorage.token||""}},mounted:function(){this.getToken(),this.getUse(this.token)},methods:{getUse:function(t){var e=this;s["a"].getUse({uid:t}).then(function(t){200==t.code&&(e.form=t.data)})},realTime:function(){},finish:function(){var t=this;this.$refs.cropper.getCropBlob(function(e){var o="avater"+t.timeInit().getTime,i={fname:"",params:{},mimeType:["image/png","image/jpeg","image/jpg","image/gif"]},n={useCdnDomain:!0,region:null},r=a["upload"](e,o,t.qiniuToken,i,n),s=t;r.subscribe(function(t){console.log(t)},function(t){console.log(t)},function(t){s.form.avater="http://pito.nvmjs.com/"+t.key,s.dialogVisible=!1})})},upfile:function(){var t=this.$refs.upfile.files[0];this.option.img=this.getObjectUrl(t),this.dialogVisible=!0},getObjectUrl:function(t){var e=null;return void 0!=window.createObjectURL?e=window.createObjectURL(t):void 0!=window.webkitURL?e=window.webkitURL.createObjectURL(t):void 0!=window.URL&&(e=window.URL.createObjectURL(t)),e},submit:function(){var t=this;this.form.uid=localStorage.token,s["a"].userInfo(this.form).then(function(e){200==e.code&&(localStorage.avater=e.data.avater,t.$message({type:"success",message:"修改个人信息成功"}),window.location.href="http://nvmjs.com/")})},getToken:function(){var t=this;r["a"].getToken().then(function(e){200==e.code&&(t.qiniuToken=e.data.token)})}}},c=l,u=(o("8823"),o("2877")),f=Object(u["a"])(c,i,n,!1,null,null,null);e["default"]=f.exports},f0fc:function(t,e,o){t.exports=o.p+"img/icon.a160f24b.png"}}]);
//# sourceMappingURL=chunk-17202afb.7746039d.js.map