(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a5251dc"],{"454f":function(t,e,n){n("46a7");var i=n("584a").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},"46a7":function(t,e,n){var i=n("63b6");i(i.S+i.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"85f2":function(t,e,n){t.exports=n("454f")},b0b4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("85f2"),a=n.n(i);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),a()(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}},d225:function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return i})},dafb:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drawing"},[n("div",{staticClass:"tiaojie"},[n("ul",[n("li",{attrs:{"data-color":"#000000"},on:{click:function(e){return t.selectColor("#000000")}}}),n("li",{attrs:{"data-color":"#ffffff"},on:{click:function(e){return t.selectColor("#ffffff")}}}),n("li",{attrs:{"data-color":"red"},on:{click:function(e){return t.selectColor("red")}}}),n("li",{attrs:{"data-color":"blue"},on:{click:function(e){return t.selectColor("blue")}}}),n("li",{attrs:{"data-color":"green"},on:{click:function(e){return t.selectColor("green")}}}),n("li",{attrs:{"data-color":"deeppink"},on:{click:function(e){return t.selectColor("deeppink")}}}),n("li",{attrs:{"data-color":"orange"},on:{click:function(e){return t.selectColor("orange")}}}),n("li",{attrs:{"data-color":"purple"},on:{click:function(e){return t.selectColor("purple")}}})])]),t._m(0),n("div",{staticClass:"right"},[n("div",{staticClass:"tool"},[n("ul",[n("li",{on:{click:function(e){t.active=1}}},[n("span",[t._v("画图")])]),n("li",{on:{click:function(e){t.active=2}}},[n("span",[t._v("文件")])]),n("li",{on:{click:function(e){t.active=3}}},[n("span",[t._v("类型")])]),n("li",{on:{click:function(e){t.active=6}}},[n("span",[t._v("粗细")])]),n("li",{on:{click:function(e){t.active=7}}},[n("span",[t._v("橡皮")])]),n("li",{staticClass:"tool-xuanze",on:{click:t.xuanzeBtn}},[n("span",[t._v("选择")])])])]),n("div",{staticClass:"list"},[1==t.active?n("ul",{staticClass:"functions uls1"},[n("li",{attrs:{"data-role":"pen"},on:{click:function(e){return t.shape("pen")}}},[n("span",[t._v("画笔")])]),n("li",{attrs:{"data-role":"line"},on:{click:function(e){return t.shape("line")}}},[n("span",[t._v("线")])]),n("li",{attrs:{"data-role":"rect"},on:{click:function(e){return t.shape("rect")}}},[n("span",[t._v("矩形")])]),n("li",{attrs:{"data-role":"circle"},on:{click:function(e){return t.shape("circle")}}},[n("span",[t._v("圆")])]),n("li",{attrs:{"data-role":"five"},on:{click:function(e){return t.shape("five")}}},[n("span",[t._v("五角星")])])]):t._e(),2==t.active?n("ul",{staticClass:"functions uls2"},[n("li",{on:{click:t.newFlie}},[n("span",[t._v("新建")])]),n("li",{on:{click:t.preservation}},[n("span",[t._v("保存")])]),n("li",{on:{click:t.backOff}},[n("span",[t._v("后退")])])]):t._e(),3==t.active?n("ul",{staticClass:"functions uls3"},[n("li",{attrs:{"data-role":"stroke"},on:{click:function(e){return t.fillOrStroke("stroke")}}},[n("span",[t._v("画线")])]),n("li",{attrs:{"data-role":"fill"},on:{click:function(e){return t.fillOrStroke("fill")}}},[n("span",[t._v("填充")])])]):t._e(),4==t.active?n("ul",{staticClass:"functions uls4"}):t._e(),5==t.active?n("ul",{staticClass:"functions uls5"}):t._e(),6==t.active?n("ul",{staticClass:" functions uls6"},[n("li",{attrs:{"data-role":"1"},on:{click:function(e){return t.thickness(1)}}},[n("span",[t._v("细")])]),n("li",{attrs:{"data-role":"3"},on:{click:function(e){return t.thickness(3)}}},[n("span",[t._v("中")])]),n("li",{attrs:{"data-role":"6"},on:{click:function(e){return t.thickness(6)}}},[n("span",[t._v("粗")])])]):t._e(),7==t.active?n("ul",{staticClass:" functions uls7"},[n("li",{attrs:{"data-role":"20"},on:{click:function(e){return t.rubber(20)}}},[n("span",[t._v("小")])]),n("li",{attrs:{"data-role":"30"},on:{click:function(e){return t.rubber(30)}}},[n("span",[t._v("中")])]),n("li",{attrs:{"data-role":"80"},on:{click:function(e){return t.rubber(80)}}},[n("span",[t._v("大")])]),n("li",{attrs:{"data-role":"200"},on:{click:function(e){return t.rubber(200)}}},[n("span",[t._v("超级大")])])]):t._e(),8==t.active?n("ul",{staticClass:"functions uls8"},[n("li",{attrs:{"data-role":"200"},on:{click:function(e){return t.cancelSelect()}}},[n("span",[t._v("取消选择")])])]):t._e()])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left canvas-box"},[n("canvas",{attrs:{id:"canvas"}}),n("div",{staticClass:"xp"}),n("div",{staticClass:"xuanze"}),n("div",{staticClass:"zhezhao"})])}],o=(n("a481"),n("d225")),s=n("b0b4"),c=function(){function t(e,n,i,a,s,c,l){Object(o["a"])(this,t),this.cxt=e,this.width=n,this.height=i,this.canvas=a,this.xobj=c,this.xuanze=s,this.fillStyle="#000",this.bordercolor="#000",this.lineWidth=2,this.type="stroke",this.shaps="line",this.history=[],this.selectFlag=!0,this.zhezhao=l,this.pen()}return Object(s["a"])(t,[{key:"init",value:function(){this.xobj.style="display: none",this.xuanze.style="display: none",this.temp&&(this.history.push(this.cxt.getImageData(0,0,this.width,this.height)),this.temp=null),this.cxt.fillStyle=this.fillStyle,this.cxt.strokeStyle=this.bordercolor,this.cxt.lineWidth=this.lineWidth}},{key:"line",value:function(t,e,n,i){this.cxt.beginPath(),this.cxt.moveTo(t,e),this.cxt.lineTo(n,i),this.cxt.closePath(),this.cxt.stroke()}},{key:"rect",value:function(t,e,n,i){this.cxt.beginPath(),this.cxt.rect(t,e,n-t,i-e),this.cxt.closePath(),this.cxt[this.type]()}},{key:"circle",value:function(t,e,n,i){var a=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e));this.cxt.beginPath(),this.cxt.arc(t,e,a,0,2*Math.PI),this.cxt.closePath(),this.cxt[this.type]()}},{key:"five",value:function(t,e,n,i){this.init();var a=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e)),o=a/2;this.cxt.beginPath(),this.cxt.moveTo(a+t,e);for(var s=0;s<10;s++)s%2==0?this.cxt.lineTo(t+Math.cos(36*s*Math.PI/180)*a,e+Math.sin(36*s*Math.PI/180)*a):this.cxt.lineTo(t+Math.cos(36*s*Math.PI/180)*o,e+Math.sin(36*s*Math.PI/180)*o);this.cxt.closePath(),this.cxt[this.type]()}},{key:"pen",value:function(){var t=this;t.canvas.onmousedown=function(e){t.init(),t.cxt.beginPath();var n=e.offsetX,i=e.offsetY;t.cxt.moveTo(n,i),t.canvas.onmousemove=function(e){t.cxt.clearRect(0,0,t.width,t.height),t.history.length>0&&t.cxt.putImageData(t.history[t.history.length-1],0,0);var a=e.offsetX,o=e.offsetY;t.cxt.quadraticCurveTo(n,i,(n+a)/2,(i+o)/2),t.cxt.stroke(),n=a,i=o},t.canvas.onmouseup=function(){t.history.push(t.cxt.getImageData(0,0,t.width,t.height)),t.canvas.onmousemove=null,t.canvas.onmouseup=null}}}},{key:"draw",value:function(){var t=this;t.canvas.onmousedown=function(e){t.init();var n=e.offsetX,i=e.offsetY;t.canvas.onmousemove=function(e){t.cxt.clearRect(0,0,t.width,t.height),t.history.length>0&&t.cxt.putImageData(t.history[t.history.length-1],0,0);var a=e.offsetX,o=e.offsetY;t[t.shaps](n,i,a,o)},t.canvas.onmouseup=function(){t.history.push(t.cxt.getImageData(0,0,t.width,t.height)),t.canvas.onmousemove=null,t.canvas.onmouseup=null}}}},{key:"xp",value:function(t,e,n,i){var a=this;t.style="display:block;";var o="width:"+n+"px;height:"+i+"px; display: block;",s="";e.style=o+s,t.onmousedown=function(c){var l=c.offsetX-n/2,r=c.offsetY-i/2;l<=0&&(l=0),l>=a.width-n&&(l=a.width-n),r<=0&&(r=0),r>=a.height-i&&(r=a.height-i),s="left:"+l+"px; top:"+r+"px;",e.style=o+s,t.onmousemove=function(t){var c=t.offsetX-n/2,l=t.offsetY-i/2;c<=0&&(c=0),c>=a.width-n&&(c=a.width-n),l<=0&&(l=0),l>=a.height-i&&(l=a.height-i),s="left:"+c+"px; top:"+l+"px;",e.style=o+s,a.cxt.clearRect(c,l,n,i)},window.onmouseup=function(){e.style="display: none",t.style="display:none;",a.history.push(a.cxt.getImageData(0,0,a.width,a.height)),t.onmousemove=null,t.onmouseup=null}}}},{key:"select",value:function(t){var e=this;e.init(),e.zhezhao.style="display: block;",e.zhezhao.onmousedown=function(n){var i,a,o,s,c=n.offsetX,l=n.offsetY;e.init(),e.zhezhao.onmousemove=function(n){e.init();var r=n.offsetX,h=n.offsetY;i=c>r?r:c,a=l>h?h:l,o=Math.abs(c-r),s=Math.abs(l-h),t.style="display:block; left:"+i+"px; top:"+a+"px;width:"+o+"px;height:"+s+"px;"},e.zhezhao.onmouseup=function(){e.zhezhao.onmouseup=null,e.zhezhao.onmousemove=null,e.temp=e.cxt.getImageData(i,a,o,s),e.cxt.clearRect(i,a,o,s),e.history.push(e.cxt.getImageData(0,0,e.width,e.height)),e.cxt.putImageData(e.temp,i,a),e.drag(i,a,o,s,t)}}}},{key:"drag",value:function(t,e,n,i,a){var o=this;o.zhezhao.onmousemove=function(a){var s=a.offsetX,c=a.offsetY;o.zhezhao.style.cursor=s>t&&s<t+n&&c>e&&c<e+i?"move":"default"},o.zhezhao.onmousedown=function(s){var c=s.offsetX,l=s.offsetY,r=c-t,h=l-e;c>t&&c<t+n&&l>e&&l<e+i?(o.zhezhao.style.cursor="move",o.zhezhao.onmousemove=function(s){o.cxt.clearRect(0,0,o.width,o.height),0!==o.history.length&&o.cxt.putImageData(o.history[o.history.length-1],0,0);var c=s.offsetX,l=s.offsetY,u=c-r,f=l-h;u<0&&(u=0),u>o.width-n&&(u=o.width-n),f<0&&(f=0),f>o.height-i&&(f=o.height-i),a.style="display:block; left:"+u+"px; top:"+f+"px;width:"+n+"px;height:"+i+"px;",t=u,e=f,o.cxt.putImageData(o.temp,u,f)},window.onmouseup=function(){o.zhezhao.onmouseup=null,o.zhezhao.onmousemove=null}):o.zhezhao.style.cursor="default"}}}]),t}(),l=c,r={data:function(){return{active:1,c:"",xp:"",zhezhao:"",xuanze:""}},mounted:function(){var t=document.querySelector(".canvas-box"),e=document.querySelector("#canvas");this.xuanze=document.querySelector(".xuanze"),this.zhezhao=document.querySelector(".zhezhao"),this.xp=document.querySelector(".xp"),e.width=t.offsetWidth,e.height=t.offsetHeight;var n=e.getContext("2d");this.c=new l(n,t.offsetWidth,t.offsetHeight,e,this.xuanze,this.xp,this.zhezhao)},methods:{shape:function(t){this.c.shaps=t,"pen"===this.c.shaps?this.c.pen():this.c.draw()},selectColor:function(t){this.c.bordercolor=t},fillOrStroke:function(t){this.c.type=t},thickness:function(t){this.c.lineWidth=t},rubber:function(t){this.c.xp(this.zhezhao,this.xp,t,t)},xuanzeBtn:function(){this.active=8,this.c.select(this.xuanze)},cancelSelect:function(){this.c.zhezhao.style="display: none",this.c.xuanze.style="display: none"},newFlie:function(){if(this.c.history.length>0){var t=window.confirm("亲，是否保存？");t?location.href=canvas.toDataURL().replace("data:image/png","data:stream/octet"):(this.c.history=[],this.c.clearRect(0,0,canvas.width,canvas.height))}},preservation:function(){this.c.history.length<=0?alert("亲,没有要保存的内容"):location.href=canvas.toDataURL().replace("data:image/png","data:stream/octet")},backOff:function(){if(0==this.c.history.length)return alert("亲,没有历史记录"),void this.c.clearRect(0,0,canvas.width,canvas.height);var t=this.c.history.pop();this.c.cxt.clearRect(0,0,canvas.width,canvas.height),this.c.cxt.putImageData(t,0,0)}}},h=r,u=(n("ff17"),n("2877")),f=Object(u["a"])(h,i,a,!1,null,"6f55108b",null);e["default"]=f.exports},ecb6:function(t,e,n){},ff17:function(t,e,n){"use strict";var i=n("ecb6"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-0a5251dc.90540f16.js.map