(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bf20af4"],{"6fab":function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i.d(e,"a",(function(){return a}))},"8e82":function(t,e,i){},9764:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.d(e,"a",(function(){return n}))},dafb:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawing"},[i("div",{staticClass:"tiaojie"},[i("ul",[i("li",{attrs:{"data-color":"#000000"},on:{click:function(e){return t.selectColor("#000000")}}}),i("li",{attrs:{"data-color":"#ffffff"},on:{click:function(e){return t.selectColor("#ffffff")}}}),i("li",{attrs:{"data-color":"red"},on:{click:function(e){return t.selectColor("red")}}}),i("li",{attrs:{"data-color":"blue"},on:{click:function(e){return t.selectColor("blue")}}}),i("li",{attrs:{"data-color":"green"},on:{click:function(e){return t.selectColor("green")}}}),i("li",{attrs:{"data-color":"deeppink"},on:{click:function(e){return t.selectColor("deeppink")}}}),i("li",{attrs:{"data-color":"orange"},on:{click:function(e){return t.selectColor("orange")}}}),i("li",{attrs:{"data-color":"purple"},on:{click:function(e){return t.selectColor("purple")}}})])]),t._m(0),i("div",{staticClass:"right"},[i("div",{staticClass:"tool"},[i("ul",[i("li",{on:{click:function(e){t.active=1}}},[i("span",[t._v("画图")])]),i("li",{on:{click:function(e){t.active=2}}},[i("span",[t._v("文件")])]),i("li",{on:{click:function(e){t.active=3}}},[i("span",[t._v("类型")])]),i("li",{on:{click:function(e){t.active=6}}},[i("span",[t._v("粗细")])]),i("li",{on:{click:function(e){t.active=7}}},[i("span",[t._v("橡皮")])]),i("li",{staticClass:"tool-xuanze",on:{click:t.xuanzeBtn}},[i("span",[t._v("选择")])])])]),i("div",{staticClass:"list"},[1==t.active?i("ul",{staticClass:"functions uls1"},[i("li",{attrs:{"data-role":"pen"},on:{click:function(e){return t.shape("pen")}}},[i("span",[t._v("画笔")])]),i("li",{attrs:{"data-role":"line"},on:{click:function(e){return t.shape("line")}}},[i("span",[t._v("线")])]),i("li",{attrs:{"data-role":"rect"},on:{click:function(e){return t.shape("rect")}}},[i("span",[t._v("矩形")])]),i("li",{attrs:{"data-role":"circle"},on:{click:function(e){return t.shape("circle")}}},[i("span",[t._v("圆")])]),i("li",{attrs:{"data-role":"five"},on:{click:function(e){return t.shape("five")}}},[i("span",[t._v("五角星")])])]):t._e(),2==t.active?i("ul",{staticClass:"functions uls2"},[i("li",{on:{click:t.newFlie}},[i("span",[t._v("新建")])]),i("li",{on:{click:t.preservation}},[i("span",[t._v("保存")])]),i("li",{on:{click:t.backOff}},[i("span",[t._v("后退")])])]):t._e(),3==t.active?i("ul",{staticClass:"functions uls3"},[i("li",{attrs:{"data-role":"stroke"},on:{click:function(e){return t.fillOrStroke("stroke")}}},[i("span",[t._v("画线")])]),i("li",{attrs:{"data-role":"fill"},on:{click:function(e){return t.fillOrStroke("fill")}}},[i("span",[t._v("填充")])])]):t._e(),4==t.active?i("ul",{staticClass:"functions uls4"}):t._e(),5==t.active?i("ul",{staticClass:"functions uls5"}):t._e(),6==t.active?i("ul",{staticClass:" functions uls6"},[i("li",{attrs:{"data-role":"1"},on:{click:function(e){return t.thickness(1)}}},[i("span",[t._v("细")])]),i("li",{attrs:{"data-role":"3"},on:{click:function(e){return t.thickness(3)}}},[i("span",[t._v("中")])]),i("li",{attrs:{"data-role":"6"},on:{click:function(e){return t.thickness(6)}}},[i("span",[t._v("粗")])])]):t._e(),7==t.active?i("ul",{staticClass:" functions uls7"},[i("li",{attrs:{"data-role":"20"},on:{click:function(e){return t.rubber(20)}}},[i("span",[t._v("小")])]),i("li",{attrs:{"data-role":"30"},on:{click:function(e){return t.rubber(30)}}},[i("span",[t._v("中")])]),i("li",{attrs:{"data-role":"80"},on:{click:function(e){return t.rubber(80)}}},[i("span",[t._v("大")])]),i("li",{attrs:{"data-role":"200"},on:{click:function(e){return t.rubber(200)}}},[i("span",[t._v("超级大")])])]):t._e(),8==t.active?i("ul",{staticClass:"functions uls8"},[i("li",{attrs:{"data-role":"200"},on:{click:function(e){return t.cancelSelect()}}},[i("span",[t._v("取消选择")])])]):t._e()])])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left canvas-box"},[i("canvas",{attrs:{id:"canvas"}}),i("div",{staticClass:"xp"}),i("div",{staticClass:"xuanze"}),i("div",{staticClass:"zhezhao"})])}],s=(i("f548"),i("9764")),o=i("6fab"),c=function(){function t(e,i,n,a,o,c,l){Object(s["a"])(this,t),this.cxt=e,this.width=i,this.height=n,this.canvas=a,this.xobj=c,this.xuanze=o,this.fillStyle="#000",this.bordercolor="#000",this.lineWidth=2,this.type="stroke",this.shaps="line",this.history=[],this.selectFlag=!0,this.zhezhao=l,this.pen()}return Object(o["a"])(t,[{key:"init",value:function(){this.xobj.style="display: none",this.xuanze.style="display: none",this.temp&&(this.history.push(this.cxt.getImageData(0,0,this.width,this.height)),this.temp=null),this.cxt.fillStyle=this.fillStyle,this.cxt.strokeStyle=this.bordercolor,this.cxt.lineWidth=this.lineWidth}},{key:"line",value:function(t,e,i,n){this.cxt.beginPath(),this.cxt.moveTo(t,e),this.cxt.lineTo(i,n),this.cxt.closePath(),this.cxt.stroke()}},{key:"rect",value:function(t,e,i,n){this.cxt.beginPath(),this.cxt.rect(t,e,i-t,n-e),this.cxt.closePath(),this.cxt[this.type]()}},{key:"circle",value:function(t,e,i,n){var a=Math.sqrt((i-t)*(i-t)+(n-e)*(n-e));this.cxt.beginPath(),this.cxt.arc(t,e,a,0,2*Math.PI),this.cxt.closePath(),this.cxt[this.type]()}},{key:"five",value:function(t,e,i,n){this.init();var a=Math.sqrt((i-t)*(i-t)+(n-e)*(n-e)),s=a/2;this.cxt.beginPath(),this.cxt.moveTo(a+t,e);for(var o=0;o<10;o++)o%2==0?this.cxt.lineTo(t+Math.cos(36*o*Math.PI/180)*a,e+Math.sin(36*o*Math.PI/180)*a):this.cxt.lineTo(t+Math.cos(36*o*Math.PI/180)*s,e+Math.sin(36*o*Math.PI/180)*s);this.cxt.closePath(),this.cxt[this.type]()}},{key:"pen",value:function(){var t=this;t.canvas.onmousedown=function(e){t.init(),t.cxt.beginPath();var i=e.offsetX,n=e.offsetY;t.cxt.moveTo(i,n),t.canvas.onmousemove=function(e){t.cxt.clearRect(0,0,t.width,t.height),t.history.length>0&&t.cxt.putImageData(t.history[t.history.length-1],0,0);var a=e.offsetX,s=e.offsetY;t.cxt.quadraticCurveTo(i,n,(i+a)/2,(n+s)/2),t.cxt.stroke(),i=a,n=s},t.canvas.onmouseup=function(){t.history.push(t.cxt.getImageData(0,0,t.width,t.height)),t.canvas.onmousemove=null,t.canvas.onmouseup=null}}}},{key:"draw",value:function(){var t=this;t.canvas.onmousedown=function(e){t.init();var i=e.offsetX,n=e.offsetY;t.canvas.onmousemove=function(e){t.cxt.clearRect(0,0,t.width,t.height),t.history.length>0&&t.cxt.putImageData(t.history[t.history.length-1],0,0);var a=e.offsetX,s=e.offsetY;t[t.shaps](i,n,a,s)},t.canvas.onmouseup=function(){t.history.push(t.cxt.getImageData(0,0,t.width,t.height)),t.canvas.onmousemove=null,t.canvas.onmouseup=null}}}},{key:"xp",value:function(t,e,i,n){var a=this;t.style="display:block;";var s="width:"+i+"px;height:"+n+"px; display: block;",o="";e.style=s+o,t.onmousedown=function(c){var l=c.offsetX-i/2,h=c.offsetY-n/2;l<=0&&(l=0),l>=a.width-i&&(l=a.width-i),h<=0&&(h=0),h>=a.height-n&&(h=a.height-n),o="left:"+l+"px; top:"+h+"px;",e.style=s+o,t.onmousemove=function(t){var c=t.offsetX-i/2,l=t.offsetY-n/2;c<=0&&(c=0),c>=a.width-i&&(c=a.width-i),l<=0&&(l=0),l>=a.height-n&&(l=a.height-n),o="left:"+c+"px; top:"+l+"px;",e.style=s+o,a.cxt.clearRect(c,l,i,n)},window.onmouseup=function(){e.style="display: none",t.style="display:none;",a.history.push(a.cxt.getImageData(0,0,a.width,a.height)),t.onmousemove=null,t.onmouseup=null}}}},{key:"select",value:function(t){var e=this;e.init(),e.zhezhao.style="display: block;",e.zhezhao.onmousedown=function(i){var n,a,s,o,c=i.offsetX,l=i.offsetY;e.init(),e.zhezhao.onmousemove=function(i){e.init();var h=i.offsetX,r=i.offsetY;n=c>h?h:c,a=l>r?r:l,s=Math.abs(c-h),o=Math.abs(l-r),t.style="display:block; left:"+n+"px; top:"+a+"px;width:"+s+"px;height:"+o+"px;"},e.zhezhao.onmouseup=function(){e.zhezhao.onmouseup=null,e.zhezhao.onmousemove=null,e.temp=e.cxt.getImageData(n,a,s,o),e.cxt.clearRect(n,a,s,o),e.history.push(e.cxt.getImageData(0,0,e.width,e.height)),e.cxt.putImageData(e.temp,n,a),e.drag(n,a,s,o,t)}}}},{key:"drag",value:function(t,e,i,n,a){var s=this;s.zhezhao.onmousemove=function(a){var o=a.offsetX,c=a.offsetY;s.zhezhao.style.cursor=o>t&&o<t+i&&c>e&&c<e+n?"move":"default"},s.zhezhao.onmousedown=function(o){var c=o.offsetX,l=o.offsetY,h=c-t,r=l-e;c>t&&c<t+i&&l>e&&l<e+n?(s.zhezhao.style.cursor="move",s.zhezhao.onmousemove=function(o){s.cxt.clearRect(0,0,s.width,s.height),0!==s.history.length&&s.cxt.putImageData(s.history[s.history.length-1],0,0);var c=o.offsetX,l=o.offsetY,u=c-h,f=l-r;u<0&&(u=0),u>s.width-i&&(u=s.width-i),f<0&&(f=0),f>s.height-n&&(f=s.height-n),a.style="display:block; left:"+u+"px; top:"+f+"px;width:"+i+"px;height:"+n+"px;",t=u,e=f,s.cxt.putImageData(s.temp,u,f)},window.onmouseup=function(){s.zhezhao.onmouseup=null,s.zhezhao.onmousemove=null}):s.zhezhao.style.cursor="default"}}}]),t}(),l=c,h={data:function(){return{active:1,c:"",xp:"",zhezhao:"",xuanze:""}},mounted:function(){var t=document.querySelector(".canvas-box"),e=document.querySelector("#canvas");this.xuanze=document.querySelector(".xuanze"),this.zhezhao=document.querySelector(".zhezhao"),this.xp=document.querySelector(".xp"),e.width=t.offsetWidth,e.height=t.offsetHeight;var i=e.getContext("2d");this.c=new l(i,t.offsetWidth,t.offsetHeight,e,this.xuanze,this.xp,this.zhezhao)},methods:{shape:function(t){this.c.shaps=t,"pen"===this.c.shaps?this.c.pen():this.c.draw()},selectColor:function(t){this.c.bordercolor=t},fillOrStroke:function(t){this.c.type=t},thickness:function(t){this.c.lineWidth=t},rubber:function(t){this.c.xp(this.zhezhao,this.xp,t,t)},xuanzeBtn:function(){this.active=8,this.c.select(this.xuanze)},cancelSelect:function(){this.c.zhezhao.style="display: none",this.c.xuanze.style="display: none"},newFlie:function(){if(this.c.history.length>0){var t=window.confirm("亲，是否保存？");t?location.href=canvas.toDataURL().replace("data:image/png","data:stream/octet"):(this.c.history=[],this.c.clearRect(0,0,canvas.width,canvas.height))}},preservation:function(){this.c.history.length<=0?alert("亲,没有要保存的内容"):location.href=canvas.toDataURL().replace("data:image/png","data:stream/octet")},backOff:function(){if(0==this.c.history.length)return alert("亲,没有历史记录"),void this.c.clearRect(0,0,canvas.width,canvas.height);var t=this.c.history.pop();this.c.cxt.clearRect(0,0,canvas.width,canvas.height),this.c.cxt.putImageData(t,0,0)}}},r=h,u=(i("ff17"),i("9ca4")),f=Object(u["a"])(r,n,a,!1,null,"6f55108b",null);e["default"]=f.exports},ff17:function(t,e,i){"use strict";var n=i("8e82"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-0bf20af4.7b3e6d7d.js.map